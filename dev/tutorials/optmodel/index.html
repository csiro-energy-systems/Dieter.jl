<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Model formulation · Dieter.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Dieter.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><a class="tocitem" href="../../quick_start_guide/">Quick Start Guide</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Model formulation</a><ul class="internal"><li><a class="tocitem" href="#The-optimization-model"><span>The optimization model</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../api/public/">Public API Reference</a></li><li><a class="tocitem" href="../../api/internal/">Internal API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Model formulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Model formulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jd-foster/Dieter.jl/blob/dev/docs/src/tutorials/optmodel.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Model-formulation"><a class="docs-heading-anchor" href="#Model-formulation">Model formulation</a><a id="Model-formulation-1"></a><a class="docs-heading-anchor-permalink" href="#Model-formulation" title="Permalink"></a></h1><ul><li><a href="#Model-formulation">Model formulation</a></li><li class="no-marker"><ul><li><a href="#The-optimization-model">The optimization model</a></li><li class="no-marker"><ul><li><a href="#Index-sets">Index sets</a></li><li><a href="#Variables">Variables</a></li><li><a href="#Generation-and-storage-capacity-variables">Generation and storage capacity variables</a></li><li><a href="#Objective-function">Objective function</a></li><li><a href="#Constraints">Constraints</a></li></ul></li></ul></li></ul><h2 id="The-optimization-model"><a class="docs-heading-anchor" href="#The-optimization-model">The optimization model</a><a id="The-optimization-model-1"></a><a class="docs-heading-anchor-permalink" href="#The-optimization-model" title="Permalink"></a></h2><p>The Dieter.jl package contains Julia functions to generate <a href="https://github.com/jump-dev/JuMP.jl">JuMP</a> linear programming model instances. Each model has a system cost-minimising objective, with  energy and power variables representing technology capacities and operational states. </p><p>While there are degrees of flexibility around the final problem formulation, there are some core structures that remain invariant across models.</p><h3 id="Index-sets"><a class="docs-heading-anchor" href="#Index-sets">Index sets</a><a id="Index-sets-1"></a><a class="docs-heading-anchor-permalink" href="#Index-sets" title="Permalink"></a></h3><p>Each optimization model is structured around some key indexing sets related to</p><ul><li>Temporal</li><li>Spatial</li><li>Transmission</li><li>Technological</li></ul><h4 id="Temporal"><a class="docs-heading-anchor" href="#Temporal">Temporal</a><a id="Temporal-1"></a><a class="docs-heading-anchor-permalink" href="#Temporal" title="Permalink"></a></h4><p>The time indexing of DIETER is typically over 8760 hours of a single full year. The start and end day of the year itself is not assumed.</p><p>For example, in the code we have something akin to</p><pre><code class="language-julia hljs">hoursInYear = 8760
Timestep = 1
Hours = 1:Timestep:hoursInYear
# [1, 2, ..., 8759, 8760]</code></pre><h4 id="Spatial"><a class="docs-heading-anchor" href="#Spatial">Spatial</a><a id="Spatial-1"></a><a class="docs-heading-anchor-permalink" href="#Spatial" title="Permalink"></a></h4><p>The model is represented spatially as a network graph, where generation and demand activity is located at nodes (or vertices), while connections between nodes are represented as directed edges (or lines). A typical node in the model represents a region of a system in which we aggregate the operations and capacities of technologies. We may assign to a node a demand requirement, for electricity or another commodity, that must be satisfied by energy production.</p><p>For example, we might define a set of nodes as a simple array of string labels:</p><pre><code class="language-julia hljs">Nodes = [&quot;R1&quot;, &quot;R2&quot;, &quot;R3&quot;]</code></pre><p>We use both the terms &quot;region&quot; and &quot;zone&quot; to refer to spatial entities, often using &quot;region&quot; to refer to the largest spatial grouping in the model, and a &quot;zone&quot; to mean a sub-region. Specific examples are transmission zones (abbreviated <code>TxZones</code>) and renewable energy zones (abbreviated <code>REZones</code>, used for aggregating variable renewable energy resources).</p><h4 id="Transmission"><a class="docs-heading-anchor" href="#Transmission">Transmission</a><a id="Transmission-1"></a><a class="docs-heading-anchor-permalink" href="#Transmission" title="Permalink"></a></h4><p>Transmission lines transfer electrical power from supply to demand. As mentioned, regions or zones are connected by lines, represented as ordered pairs of spatial nodes. We refer to these lines as <code>Arcs</code> in the models: an arc may represent what in reality is a transmission link comprised of one or more physical transmission lines.</p><p>A basic line representation is a pair consisting of two spatial regions. We collect all lines in the set <code>Arcs</code></p><p>For example:</p><pre><code class="language-julia hljs">Arcs = [(&quot;R1&quot;,&quot;R2&quot;), (&quot;R2&quot;, &quot;R1&quot;), (&quot;R2,R3&quot;), (&quot;R2&quot;, &quot;R3&quot;)]</code></pre><p>Here the network topology is a linear graph (R1 ⇆ R2 ⇆ R3) where both directions of a connection between regions are explicitly included in the set.</p><h4 id="Technological"><a class="docs-heading-anchor" href="#Technological">Technological</a><a id="Technological-1"></a><a class="docs-heading-anchor-permalink" href="#Technological" title="Permalink"></a></h4><p>Technologies are sub-categorised as follows:</p><ul><li>Conventional (fossil fuel-based) electrical generators</li><li>Variable renewable electrical generators</li><li>Energy storage devices</li><li>Hydrogen production devices</li></ul><p>The set <code>Techs</code> contains variable and dispatchable electricity generation types, for example</p><pre><code class="language-julia hljs">Techs = [&quot;Wind&quot;, &quot;SolarPV&quot;, &quot;Hydro&quot;, &quot;CCGT&quot;, &quot;OCGT&quot;]</code></pre><p>and is distinguished from the set <code>Storages</code> of energy storage technology types, for example</p><pre><code class="language-julia hljs">Storages = [&quot;LIonBattery&quot;, &quot;PumpedHydro&quot;, &quot;CAES&quot;, &quot;RedoxBattery&quot;]</code></pre><p>since the model constraints differ for these two categories.</p><h4 id="Mapping-between-index-sets"><a class="docs-heading-anchor" href="#Mapping-between-index-sets">Mapping between index sets</a><a id="Mapping-between-index-sets-1"></a><a class="docs-heading-anchor-permalink" href="#Mapping-between-index-sets" title="Permalink"></a></h4><p>Any model must construct relations between basic components in different categories.</p><p>For instance, it is important to consider that not all technology types exist in every spatial region. It is therefore necessary to have a method of mapping technologies to regions. A direct method is to maintain an index array of pairs consisting of a node matched with a technology:</p><pre><code class="language-julia hljs">Nodes_Techs = [ (&quot;R1&quot;,&quot;Hydro&quot;), (&quot;R1&quot;,&quot;CCGT&quot;),(&quot;R1&quot;,&quot;SolarPV&quot;), 
                (&quot;R2&quot;,&quot;SolarPV&quot;), (&quot;R2&quot;,&quot;Wind&quot;),
                (&quot;R3&quot;,&quot;Hydro&quot;), (&quot;R3&quot;,&quot;CCGT&quot;), (&quot;R3&quot;,&quot;SolarPV&quot;), (&quot;R3&quot;,&quot;Wind&quot;)]</code></pre><p>while for storage technologies the correspondence between location and available storage technologies is similarly defined through the array of pairs</p><pre><code class="language-julia hljs">Nodes_Storages = [ (&quot;R1&quot;,&quot;LIonBattery&quot;),
                   (&quot;R3&quot;,&quot;LIonBattery&quot;), (&quot;R3&quot;,&quot;PumpedHydro&quot;)]</code></pre><p>Numerous other similar subsets are used to define sets of constraints on particular combinations of technology, spatial location and so on. For example, <code>Nodes_Dispatch</code> is the subset of <code>Nodes_Techs</code> filtered to have only dispatchable technologies in the second component.</p><h3 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h3><p>The key decision variables of the model are shown here as</p><p><code>Julia variable name</code> - <em>Short descriptor</em> - <span>$\TeX$</span> notation</p><p>The notation <code>v[I,J]</code> indicates that the variable <code>v</code> is jointly indexed over <code>I</code>, <code>J</code>, etc.</p><h4 id="Generation-operational-variables"><a class="docs-heading-anchor" href="#Generation-operational-variables">Generation operational variables</a><a id="Generation-operational-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Generation-operational-variables" title="Permalink"></a></h4><ul><li><code>G[Nodes_Techs, Hours]</code> - <em>Generation level</em> - <span>$G_{(n,t),h}$</span><ul><li>Detail: Generation level - all generation technologies</li><li>Bounds: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>G_UP[Nodes_Dispatch, Hours]</code> - <em>Generation upshift</em><ul><li>Detail: Generation level change upwards</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>G_DO[Nodes_Dispatch, Hours]</code> - <em>Generation downshift</em><ul><li>Detail: Generation level change downwards</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>G_REZ[REZones,Hours]</code> - <em>Generation renewable</em> - <span>$G^{\text{REZ}}_{z,h}$</span><ul><li>Detail: Generation level - renewable energy zone tech. &amp; storage</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li><li><strong>Note</strong>: This is a &#39;book-keeping&#39; variable for each renewable energy zone (REZ, <code>REZones</code>) that aggregates operational variables at each hour.</li></ul></li><li><code>G_TxZ[TxZones,Hours]</code> - <em>Generation transmission zones</em> - <span>$G^{\text{TxZ}}_{z,h}$</span><ul><li>Detail: Generation level - transmission zone tech. &amp; storage</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li><li><strong>Note</strong>: This is a &#39;book-keeping&#39; variable for each transmission zone (<code>TxZones</code>) that aggregates operational variables in each hour.</li></ul></li></ul><h4 id="Storage-operational-variables"><a class="docs-heading-anchor" href="#Storage-operational-variables">Storage operational variables</a><a id="Storage-operational-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-operational-variables" title="Permalink"></a></h4><ul><li><code>STO_IN[Nodes_Storages, Hours]</code> - <em>Storage inflow</em> - <span>$STO^{\text{IN}}_{(n,sto),h}$</span><ul><li>Detail: Storage energy inflow</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>STO_OUT[Nodes_Storages, Hours]</code> - <em>Storage outflow</em> - <span>$STO^{\text{OUT}}_{(n,sto),h}$</span><ul><li>Detail: Storage energy outflow</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>STO_L[Nodes_Storages, Hours]</code> - <em>Storage level</em> - <span>$STO^{\text{L}}_{(n,sto),h}$</span><ul><li>Detail: Storage energy level</li><li>Bound: lower_bound=0</li><li>Units: MWh at a given time-interval; </li></ul></li></ul><h3 id="Generation-and-storage-capacity-variables"><a class="docs-heading-anchor" href="#Generation-and-storage-capacity-variables">Generation and storage capacity variables</a><a id="Generation-and-storage-capacity-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Generation-and-storage-capacity-variables" title="Permalink"></a></h3><ul><li><code>N_TECH[Nodes_Techs]</code> - <em>Technology capacity</em> - <span>$N^{\text{TECH}}_{(n,t)}$</span><ul><li>Detail: Generation technology capacity </li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li><li><code>N_STO_E[Nodes_Storages]</code> - <em>Storage build energy</em> - <span>$N^{\text{E}}_{(n,sto)}$</span><ul><li>Detail: Storage energy capacity</li><li>Bound: lower_bound=0</li><li>Units: MWh; </li></ul></li><li><code>N_STO_P[Nodes_Storages]</code> - <em>Storage capacity</em> - <span>$N^{\text{P}}_{(n,sto)}$</span><ul><li>Detail: Storage (charge/discharge) power capacity</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li><li><code>N_SYNC[Nodes_SynCons]</code> - <em>SynCon capacity</em> - <span>$N^{\text{SYNC}}_{(n,s)}$</span><ul><li>Detail: Synchronous condenser capacity</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li></ul><h4 id="Transmission-network-variables"><a class="docs-heading-anchor" href="#Transmission-network-variables">Transmission network variables</a><a id="Transmission-network-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Transmission-network-variables" title="Permalink"></a></h4><ul><li><code>FLOW[Arcs,Hours]</code> - <em>Internodal flow</em> - <span>$F_{(n_F,n_T),h}$</span><ul><li>Detail: Power flow between nodes in topology</li><li>Bound: free</li><li>Units: MWh; </li></ul></li><li><code>N_IC_EXP[Arcs]</code> - <em>Internodal flow expansion</em> - <span>$N^{\text{IC\_EXP}}_{(n_F,n_T)}$</span><ul><li>Detail: Power transmission (flow) capacity expansion betweeen zones</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li><li><code>N_REZ_EXP[REZones]</code> - <em>Renewable capacity expand</em><ul><li>Detail: Renewable technology transmission capacity built</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li><li><code>N_REZ_EXP_TX[REZones]</code> - <em>REZ expand by transmission</em><ul><li>Detail: REZ transmission capacity built when transmission network is expanded</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li></ul><h4 id="Hydrogen-production-operational-variables"><a class="docs-heading-anchor" href="#Hydrogen-production-operational-variables">Hydrogen production operational variables</a><a id="Hydrogen-production-operational-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-production-operational-variables" title="Permalink"></a></h4><ul><li><code>H2_P2G[Nodes_P2G, Hours]</code> - <em>H2 power to gas</em> - <span>$H2^{\text{P2G}}_{(n,p),h}$</span><ul><li>Detail: Power-to-gas hydrogen production</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>H2_G2P[Nodes_G2P, Hours]</code> - <em>H2 gas to power</em> - <span>$H2^{\text{G2P}}_{(n,g),h}$</span><ul><li>Detail: Hydrogen Gas-to-power energy conversion</li><li>Bound: lower_bound=0</li><li>Units: MWh per time-interval; </li></ul></li><li><code>H2_GS_L[Nodes_GasStorages, Hours]</code> - <em>H2 storage level</em> - <span>$H2^{\text{GS\_L}}_{(n,p),h}$</span><ul><li>Detail: Current gas storage level</li><li>Bound: lower_bound=0</li><li>Units: tonne-H2 at a given time-interval; </li></ul></li><li><code>H2_GS_IN[Nodes_GasStorages, Hours]</code> - <em>H2 storage inflow</em><ul><li>Detail: Current gas storage input</li><li>Bound: lower_bound=0</li><li>Units: tonne-H2 at a given time-interval; </li></ul></li><li><code>H2_GS_OUT[Nodes_GasStorages, Hours]</code> - <em>H2 storage outflow</em><ul><li>Detail: Current gas storage output</li><li>Bound: lower_bound=0</li><li>Units: tonne-H2 at a given time-interval; </li></ul></li></ul><h4 id="Hydrogen-capacity-variables"><a class="docs-heading-anchor" href="#Hydrogen-capacity-variables">Hydrogen capacity variables</a><a id="Hydrogen-capacity-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-capacity-variables" title="Permalink"></a></h4><ul><li><code>N_P2G[Nodes_P2G]</code> - <em>H2 P2G capacity</em> - <span>$N^{\text{P2G}}_{(n,p)}$</span><ul><li>Detail:  Power-to-gas capacity</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li><li><code>N_G2P[Nodes_G2P]</code> - <em>H2 G2P capacity</em> - <span>$N^{\text{G2P}}_{(n,g)}$</span><ul><li>Detail: Gas-to-power capacity</li><li>Bound: lower_bound=0</li><li>Units: MW; </li></ul></li><li><code>N_GS[Nodes_GasStorages]</code> - <em>H2 storage capacity</em> - <span>$N^{\text{GS}}_{(n,gs)}$</span><ul><li>Detail: Gas storage capacity</li><li>Bound: lower_bound=0</li><li>Units; tonne-H2 ; </li></ul></li></ul><h3 id="Objective-function"><a class="docs-heading-anchor" href="#Objective-function">Objective function</a><a id="Objective-function-1"></a><a class="docs-heading-anchor-permalink" href="#Objective-function" title="Permalink"></a></h3><p>The default objective function represents the total system cost. It has an operational component and a capacity investment component. We will write</p><p class="math-container">\[Z = Z^{\text{cap}} + \sum_{h \in \text{Hours}} Z_h^{\text{op}}\]</p><p>where each cost component comprises further subcomponents, as outlined next.</p><h4 id="Operational-costs"><a class="docs-heading-anchor" href="#Operational-costs">Operational costs</a><a id="Operational-costs-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-costs" title="Permalink"></a></h4><p>For each time step index <span>$h \in \text{Hours}$</span>, operational costs <span>$Z_h^{\text{op}}$</span> are the sum of applicable variable costs (typically on a cost-per-MWh basis) for</p><ul><li>generation, due to <ul><li>operation and maintenance (O&amp;M) : <span>$vc$</span></li><li>fuel : <span>$fc$</span></li><li>carbon emissions : <span>$co2$</span></li></ul></li><li>storage charge and discharge<ul><li>operation and maintenance (O&amp;M) : <span>$vc$</span></li></ul></li><li>hydrogen production and hydrogen-fuelled power generation<ul><li>operation and maintenance (O&amp;M) : <span>$vc$</span></li></ul></li></ul><p>Mathematically,</p><p class="math-container">\[\begin{align*}
Z_h^{\text{op}} &amp;= 
 \sum_{n \in \text{Nodes}} \sum_{t \in \text{Techs}} (vc_{(n,t)} + \eta_{(n,t)} fc_{(n,t)} + co2_{(n,t)}) G_{(n,t),h}\\
&amp;  +  \sum_{n \in \text{Nodes}} \sum_{sto \in \text{Storages}} vc_{(n,sto)} (STO^{\text{IN}}_{(n,sto),h} + STO^{\text{OUT}}_{(n,sto),h}) \\
&amp;  +  \sum_{n \in \text{Nodes}} \left[ \sum_{p \in \text{P2G}} vc_{(n,p)} H2^{\text{P2G}}_{(n,p),h} + \sum_{g \in \text{G2P}} vc_{(n,g)} H2^{\text{G2P}}_{(n,g),h} \right]               
\end{align*}\]</p><p>where the parameter <span>$\eta$</span> is a conversion efficiency of fuel to electrical power (storage round-trip efficiencies are handled in constraints).</p><p>In code, the objective function is</p><pre><code class="language-julia hljs">@objective(m, Min, Z)
@constraint(m, ObjectiveFunction, Z ==
sum(MarginalCost[n,t] * G[(n,t),h] for (n,t) in Nodes_Dispatch, h in Hours)

+ sum(MarginalCost[n,sto] * (STO_OUT[(n,sto),h] + STO_IN[(n,sto),h]) for (n,sto) in Nodes_Storages, h in Hours)

+ sum(MarginalCost[n,p2g] * H2_P2G[(n,p2g),h] for (n,p2g) in Nodes_P2G, h in Hours)
+ sum(MarginalCost[n,g2p] * H2_G2P[(n,g2p),h] for (n,g2p) in Nodes_G2P, h in Hours)
...</code></pre><p>where <code>MarginalCost</code> encapsulates the cost components above, and the sum over all time steps is represented. Note the use of particular mapping subsets (e.g. <code>Nodes_Dispatch</code>) to refine the summation to only the terms with applicable data.</p><p>Additional operational terms for load following costs are also included as</p><pre><code class="language-julia hljs">+ LoadIncreaseCost[n,t] * sum(G_UP[(n,t),h] for (n,t) in Nodes_Dispatch, h in Hours2)
+ LoadDecreaseCost[n,t] * sum(G_DO[(n,t),h] for (n,t) in Nodes_Dispatch, h in Hours)
...</code></pre><p>that serve as soft-penalty proxies for the relative flexibility of different dispatchable generation technologies.</p><h4 id="Capacity-investment-costs"><a class="docs-heading-anchor" href="#Capacity-investment-costs">Capacity investment costs</a><a id="Capacity-investment-costs-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-investment-costs" title="Permalink"></a></h4><p>For each modelling year, the fixed cost (annual) and the investment cost (amortised relative to the lifetime of the technology) are combined to form <span>$Z^{\text{cap}}$</span>, where</p><p class="math-container">\[Z^{\text{cap}} = Z^{\text{fix}} + Z^{\text{inv}}.\]</p><p>Here</p><p class="math-container">\[\begin{align*}
Z^{\text{inv}} &amp;= 
     \sum_{n \in \text{Nodes}} \sum_{t \in \text{Techs}} ic_{(n,t)} N^{\text{TECH}}_{(n,t)} \\
  &amp;+ \sum_{n \in \text{Nodes}} \sum_{sto \in \text{Techs}} ic^P_{(n,sto)} N^{\text{P}}_{(n,sto)} + ic^E_{(n,sto)} N^{\text{E}}_{(n,sto)} \\
  &amp;+ \sum_{n \in \text{Nodes}} \sum_{s \in \text{SynCons}} ic^{SYNC}_{(n,s)} N^{\text{SYNC}}_{(n,s)} \\
  &amp;+ \sum_{n \in \text{Nodes}} \left[ \sum_{p \in \text{P2G}} ic^{P2G}_{(n,p)} N^{\text{P2G}}_{(n,p)} +  \sum_{g \in \text{G2P}} ic^{G2P}_{(n,g)} N^{\text{G2P}}_{(n,g)}
  +  \sum_{gs \in \text{GasSto}} ic^{GS}_{(n,gs)} N^{\text{GS}}_{(n,gs)}  \right] \\
  &amp;+ \sum_{(n_F,n_T) \in \text{Arcs}} ic^{IC\_EXP}_{(n_F,n_T)} N^{\text{IC\_EXP}}_{(n_F,n_T)}
\end{align*}\]</p><p>where the parameters <span>$ic$</span> refer to the present year investment costs. The objective term <span>$Z^{\text{fix}}$</span> is analogously defined after replacing investment costs with fixed costs.</p><p>Continuing from above, the following terms are appear in the objective function as</p><pre><code class="language-julia hljs">+ sum(InvestmentCost[n,t] * N_TECH[(n,t)] for (n,t) in Nodes_Techs_New)

+ sum(InvestmentCostPower[n,sto] * N_STO_P[(n,sto)] for (n,sto) in Nodes_Storages_New)
+ sum(InvestmentCostEnergy[n,sto] * N_STO_E[(n,sto)] for (n,sto) in Nodes_Storages_New)

+ sum(InvestmentCostSynCon[n,syn] * N_SYNC[(n,syn)] for (n,syn) in Nodes_SynCons)

+ sum(InvestmentCost[n,p2g] * N_P2G[(n,p2g)] for (n,p2g) in Nodes_P2G)
+ sum(InvestmentCost[n,g2p] * N_G2P[(n,g2p)] for (n,g2p) in Nodes_G2P)
+ sum(InvestmentCost[n,gs] * N_GS[(n,gs)] for (n,gs) in Nodes_GasStorages)

+ sum(ArcWeight[from,to]*InvestmentCostTransExp[from,to] * N_IC_EXP[(from,to)] for (from,to) in Arcs)

+ sum(FixedCost[n,t] * N_TECH[(n,t)] for (n,t) in Nodes_Techs)
+ sum(FixedCost[n,sto] * N_STO_P[(n,sto)] for (n,sto) in Nodes_Storages)

+ sum(FixedCost[n,p2g] * N_P2G[(n,p2g)] for (n,p2g) in Nodes_P2G)
+ sum(FixedCost[n,g2p] * N_G2P[(n,g2p)] for (n,g2p) in Nodes_G2P)
+ sum(FixedCost[n,gs] * N_GS[(n,gs)] for (n,gs) in Nodes_GasStorages)</code></pre><p>Note that while this formulation does not explicitly display discounting factors, these are applied in a separate pre-processing step.</p><h3 id="Constraints"><a class="docs-heading-anchor" href="#Constraints">Constraints</a><a id="Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints" title="Permalink"></a></h3><p>For compactness we abbreviate <code>Nodes</code> to <span>$N$</span>, <code>Techs</code> to <span>$T$</span>, <code>Storages</code> to <span>$S$</span>, and <code>Arcs</code> to <span>$A$</span>. </p><p><em>Definition of REZone generation book-keeping variables</em>: for <span>$z \in$</span> <code>REZones</code>,</p><p class="math-container">\[G^{\text{REZ}}_{z,h} = 
    \sum_{t | (z,t) \in N \times T} G_{(z,t),h}
    + \sum_{sto | (z,sto) \in N \times S} (STO^{\text{IN}}_{(z,sto),h} - STO^{\text{OUT}}_{(z,sto),h}) \]</p><pre><code class="language-julia hljs">@constraint(m, REZoneGen[rez=REZones,h=Hours],
    G_REZ[rez,h] ==
        sum(G[(z,t),h] for (z,t) in Nodes_Techs if z == rez)
        +  sum(STO_OUT[(q,sto),h] - STO_IN[(q,sto),h] for (q,sto) in Nodes_Storages if q == rez)
);</code></pre><p><em>Definition of TxZone generation book-keeping variables</em>: for <span>$z \in$</span> <code>TxZones</code> and <span>$h \in$</span> <code>Hours</code>,</p><p class="math-container">\[G^{\text{TxZ}}_{(z,t),h} = 
    \sum_{t | (z,t) \in N \times T} G_{(n,t),h}
    + \sum_{sto | (z,sto) \in N \times S} (STO^{\text{IN}}_{(z,sto),h} - STO^{\text{OUT}}_{(z,sto),h}) \\
    + \sum_{(rez,t) \in N \times T \, | \; rez \, \uparrow z } G^{\text{REZ}}_{rez,h} - \sum_{(n_F,n_T) \in A \, | \, n_F = z } F_{(n_F,n_T),h} \]</p><p>where <span>$rez \, \uparrow z$</span>  means the renewable enegy zone <span>$rez$</span> is connected to the transmission zone <span>$z$</span>. </p><pre><code class="language-julia hljs">@constraint(m, TxZoneGen[zone=TxZones,h=Hours],
    G_TxZ[zone,h] ==
        sum(G[(z,t),h] for (z,t) in Nodes_Techs if z == zone)
        +  sum(STO_OUT[(z,sto),h] - STO_IN[(z,sto),h] for (z,sto) in Nodes_Storages if z == zone)
        +  sum(G_REZ[rez,h] for (rez, z) in Nodes_Promotes if z == zone)
        -  sum(FLOW[(from,to),h] for (from,to) in Arcs if from == zone)
);</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../quick_start_guide/">« Quick Start Guide</a><a class="docs-footer-nextpage" href="../../api/public/">Public API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Friday 12 August 2022 14:23">Friday 12 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
